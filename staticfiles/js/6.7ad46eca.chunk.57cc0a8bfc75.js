(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{115:function(e,t,a){},125:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",function(){return n})},133:function(e,t,a){},151:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),l=a(2),i=a(3),o=a.n(i),m=a(16),u=a.n(m),s=a(7),d=a(10),f=a(9),p=a.n(f),_=a(125),E=a(12),g=function(e){var t=e.handleSubmit,a=e.submitLabel,l=e.hasCancelButton,i=void 0!==l&&l,o=e.initialText,m=void 0===o?"":o,u=e.handleCancel,s=Object(r.useState)(m),d=Object(n.a)(s,2),f=d[0],p=d[1],_=0===f.length;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(f),p("")}},c.a.createElement("textarea",{className:"comment-form-textarea",value:f,defaultValue:m,onChange:function(e){return p(e.target.value)}}),c.a.createElement("div",{className:"post-btn"},c.a.createElement("button",{className:"btn btn-primary btn-sm",disabled:_},a),i&&c.a.createElement("button",{type:"button",className:"btn btn-danger m-2 btn-sm",onClick:u},"Cancel"))))},v=(a(133),function e(t){var a=t.comment,n=t.replies,r=t.currentUserId,l=t.deleteComment,i=t.updateComment,o=t.activeComment,m=t.setActiveComment,u=t.addComment,s=t.parentId,d=void 0===s?null:s,f=a.created_at,p=new Date-new Date(f)>3e5,_=Boolean(r),E=r===a.user_id&&!p,v=r===a.user_id&&!p,b=new Date(f).toLocaleDateString(),h=o&&"replying"===o.type&&o.id===a.id,k=o&&"editing"===o.type&&o.id===a.id,N=d||a.id;return c.a.createElement("div",{className:"comment"},c.a.createElement("div",{className:"comment-image-container"},null!==a.comment_avatar_url?c.a.createElement("img",{src:a.comment_avatar_url,className:"user-profile-img",alt:"avatar"}):c.a.createElement("img",{src:"https://etour-first-backet.s3.amazonaws.com/avatars/user-icon.png",alt:"avatar"}),c.a.createElement("div",{className:"comment-right-part"}),c.a.createElement("div",{className:"comment-content"},c.a.createElement("div",{className:"comment-author"},a.username),c.a.createElement("div",null,b)),!k&&c.a.createElement("div",{className:"comment-text"},a.body),k&&c.a.createElement(g,{submitLabel:"Update",hasCancelButton:!0,initialText:a.body,handleSubmit:function(e){return i(e,a.id)},handleCancel:function(){return m(null)}}),c.a.createElement("div",{className:"comment-actions"},_&&c.a.createElement("div",{className:"comment-action",onClick:function(){return m({id:a.id,type:"replying"})}},"Reply"),E&&c.a.createElement("div",{className:"comment-action",onClick:function(){return m({id:a.id,type:"editing"})}},"Edit"),v&&c.a.createElement("div",{className:"comment-action",onClick:function(){return l(a.id)}},"Delete")),h&&c.a.createElement(g,{submitLabel:"Replay",hasCancelButton:!0,handleCancel:function(){return m(null)},handleSubmit:function(e){return u(e,N)}}),n.length>0&&c.a.createElement("div",{className:"replies"},n.map(function(t){return c.a.createElement(e,{comment:t,key:t.id,replies:[],currentUserId:r,addComment:u,deleteComment:l,updateComment:i,activeComment:o,setActiveComment:m,parentId:a.id})}))))}),b=function(e){var t=e.tour_site_id,a=Object(r.useState)([]),l=Object(n.a)(a,2),i=l[0],m=l[1],u=Object(r.useState)(null),f=Object(n.a)(u,2),b=f[0],h=f[1],k=Object(r.useContext)(s.a).user,N=Object(r.useState)({}),C=Object(n.a)(N,2),y=C[0],j=C[1],O=k.id,w=i.filter(function(e){return null===e.parent_id}).filter(function(e){return e.tour_site_id===t}),S=function(){var e=Object(E.a)(p.a.mark(function e(a){var n,r,c=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,r={body:a,parent_id:n,user_id:k.id,comment_avatar_url:y.profile_avatar,username:k.username,created_at:(new Date).toISOString(),tour_site_id:t},o.a.defaults.xsrfCookieName="csrftoken",o.a.defaults.xsrfHeaderName="X-CSRFToken",e.next=6,o.a.post("https://etour.herokuapp.com/HDp0mdCOWxaBRhELG5PUMWQnrXSkObDQBnvUhC5XsTROlI6Wz99ctDZtzRLqHuvgidz0mX3ws3K6ggPc8p21OT2jwEcbpNMDHcHrxb0EoN7al1aP8fKoSpZMyXvL9FxnkJuS2KG5r1d8YkjyYjgCj2V44GdYk6ehB7JJuqoE6wAZWe5VisNMKnFYfS40mhymtJNFb8Aq/comments/",r).then(function(e){m([e.data].concat(Object(_.a)(i)))}).then(h(null)).catch(function(e){alert("An error occurred while posting your comment. Please try again later")});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(E.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Your Comment will be deleted!")){e.next=5;break}return o.a.defaults.xsrfCookieName="csrftoken",o.a.defaults.xsrfHeaderName="X-CSRFToken",e.next=5,o.a.delete("https://etour.herokuapp.com/HDp0mdCOWxaBRhELG5PUMWQnrXSkObDQBnvUhC5XsTROlI6Wz99ctDZtzRLqHuvgidz0mX3ws3K6ggPc8p21OT2jwEcbpNMDHcHrxb0EoN7al1aP8fKoSpZMyXvL9FxnkJuS2KG5r1d8YkjyYjgCj2V44GdYk6ehB7JJuqoE6wAZWe5VisNMKnFYfS40mhymtJNFb8Aq/comments/".concat(t)).then(function(){var e=i.filter(function(e){return e.id!==t});m(function(t){return e})}).catch(function(e){alert("An error occurred while deleting your comment. Please try aging later.")});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(E.a)(p.a.mark(function e(t,a){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={body:t},o.a.defaults.xsrfCookieName="csrftoken",o.a.defaults.xsrfHeaderName="X-CSRFToken",e.next=5,o.a.patch("https://etour.herokuapp.com/HDp0mdCOWxaBRhELG5PUMWQnrXSkObDQBnvUhC5XsTROlI6Wz99ctDZtzRLqHuvgidz0mX3ws3K6ggPc8p21OT2jwEcbpNMDHcHrxb0EoN7al1aP8fKoSpZMyXvL9FxnkJuS2KG5r1d8YkjyYjgCj2V44GdYk6ehB7JJuqoE6wAZWe5VisNMKnFYfS40mhymtJNFb8Aq/comments/".concat(a,"/"),n).then(function(){var e=i.map(function(e){return e.id===a?Object(d.a)({},e,{body:t}):e});m(e),h(null)});case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();return Object(r.useEffect)(function(){o.a.get("https://etour.herokuapp.com/HDp0mdCOWxaBRhELG5PUMWQnrXSkObDQBnvUhC5XsTROlI6Wz99ctDZtzRLqHuvgidz0mX3ws3K6ggPc8p21OT2jwEcbpNMDHcHrxb0EoN7al1aP8fKoSpZMyXvL9FxnkJuS2KG5r1d8YkjyYjgCj2V44GdYk6ehB7JJuqoE6wAZWe5VisNMKnFYfS40mhymtJNFb8Aq/comments/").then(function(e){m(e.data)}).catch(function(e){}),o.a.get("https://etour.herokuapp.com/HDp0mdCOWxaBRhELG5PUMWQnrXSkObDQBnvUhC5XsTROlI6Wz99ctDZtzRLqHuvgidz0mX3ws3K6ggPc8p21OT2jwEcbpNMDHcHrxb0EoN7al1aP8fKoSpZMyXvL9FxnkJuS2KG5r1d8YkjyYjgCj2V44GdYk6ehB7JJuqoE6wAZWe5VisNMKnFYfS40mhymtJNFb8Aq/user/profile/".concat(O)).then(function(e){j(e.data)}).catch(function(e){})},[O]),c.a.createElement("div",{className:"comments"},c.a.createElement("h3",{className:"comments-title"},"Comments"),c.a.createElement("div",{className:"comment-form-title"},"Leave a Comment"),c.a.createElement(g,{submitLabel:"Post",handleSubmit:S}),c.a.createElement("div",{className:"comments-container"},w.map(function(e){return c.a.createElement(v,{key:e.id,comment:e,replies:(t=e.id,i.filter(function(e){return e.parent_id===t}).sort(function(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()})),currentUserId:k.id,deleteComment:x,updateComment:D,activeComment:b,setActiveComment:h,addComment:S});var t})))},h=function(e){return c.a.createElement(s.b,null,c.a.createElement(b,{tour_site_id:e.tour_site_id}))},k=a(13),N=(a(151),function(e){var t=Object(k.b)().addItem,a=Object(r.useState)(!0),l=Object(n.a)(a,2),i=l[0];l[1];return c.a.createElement("div",{className:"booking"},c.a.createElement("button",{disabled:i,className:"btn btn-primary m-2"},"Book Now"),c.a.createElement("button",{className:"btn btn-warning",onClick:function(){return t(e.tour)}},"Add to list"),c.a.createElement("h6",null,"We are working on bookings!"))}),C=(a(115),function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"recommended-products"},c.a.createElement("h5",null,"Some Recommended Products for ",e.name," "),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("h6",null,e.product_01)),c.a.createElement("li",null,c.a.createElement("h6",null,e.product_02)),c.a.createElement("li",null,c.a.createElement("h6",null,e.product_03)),c.a.createElement("li",null,c.a.createElement("h6",null,e.product_04)),c.a.createElement("li",null,c.a.createElement("h6",null,e.product_05)),c.a.createElement("li",null,c.a.createElement("h6",null,e.product_06)),c.a.createElement("li",null,c.a.createElement("h6",null,e.product_07)))))}),y=function(e){var t=Object(r.useState)(e.img),a=Object(n.a)(t,2),l=a[0],i=a[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"imgBx"},c.a.createElement("img",{src:l,id:"initial-img",alt:e.name})),c.a.createElement("div",{className:"other-img"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-3"},c.a.createElement("div",{className:"col"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return i(function(t){return e.image_01})}},c.a.createElement("img",{src:e.image_01,className:"side-img",alt:e.name}))))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement("div",{className:"col"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return i(function(t){return e.image_02})}},c.a.createElement("img",{src:e.image_02,className:"side-img",alt:e.name}))))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement("div",{className:"col"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return i(function(t){return e.image_03})}},c.a.createElement("img",{src:e.image_03,className:"side-img",alt:e.name}))))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement("div",{className:"col"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return i(function(t){return e.image_04})}},c.a.createElement("img",{src:e.image_04,className:"side-img",alt:e.name}))))))))},j=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"location-info"},c.a.createElement("h5",null,"Location information "),c.a.createElement("h6",null,"Region: ",e.region," "),c.a.createElement("h6",null,"Country: ",e.country),c.a.createElement("h6",null,"Location: ",e.location),c.a.createElement("h6",null,"Tourist traffic annually: ",e.touristRate)))},O=function(e){var t=Object(r.useContext)(s.a).user,a=void 0===e.name?"etour international":e.name;return Object(r.useEffect)(function(){document.title="".concat(a)},[]),c.a.createElement("div",{className:"viewpage"},c.a.createElement("div",{className:"container"},c.a.createElement("div",null,c.a.createElement(y,{name:e.name,img:e.image_01,image_01:e.image_01,image_02:e.image_02,image_03:e.image_03,image_04:e.image_04})),c.a.createElement("div",{className:"content"},c.a.createElement("h2",null,e.name),c.a.createElement("p",null,e.longDescription)),c.a.createElement("div",null,c.a.createElement(j,{region:e.region,country:e.country,location:e.location,touristRate:e.touristRate})),c.a.createElement("div",null,c.a.createElement(C,{name:e.name,product_01:e.product_01,product_02:e.product_02,product_03:e.product_03,product_04:e.product_04,product_05:e.product_05,product_06:e.product_06,product_07:e.product_07})),c.a.createElement("div",null,c.a.createElement(N,{tour:e.tour})),t&&c.a.createElement("div",{className:"rendered-comments"},c.a.createElement(h,{tour_site_id:e.tour_site_id})),!t&&c.a.createElement("div",null)))};t.default=function(){var e=Object(r.useState)({}),t=Object(n.a)(e,2),a=t[0],i=t[1],m=Object(r.useState)(!0),s=Object(n.a)(m,2),d=s[0],f=s[1],p=Object(l.h)(),_=parseInt(p.id);return Object(r.useEffect)(function(){o.a.get("https://etour.herokuapp.com/HDp0mdCOWxaBRhELG5PUMWQnrXSkObDQBnvUhC5XsTROlI6Wz99ctDZtzRLqHuvgidz0mX3ws3K6ggPc8p21OT2jwEcbpNMDHcHrxb0EoN7al1aP8fKoSpZMyXvL9FxnkJuS2KG5r1d8YkjyYjgCj2V44GdYk6ehB7JJuqoE6wAZWe5VisNMKnFYfS40mhymtJNFb8Aq/".concat(_)).then(function(e){i(e.data),f(!1)}).catch(function(){f(!1)})},[_]),d?c.a.createElement("div",{className:"details-loading"},c.a.createElement("img",{src:u.a,className:"loading-clockwise",alt:"Loading..."})):c.a.createElement("div",null,c.a.createElement(O,{key:a.id,tour:a,tour_site_id:_,img:a.image_01,image_01:a.image_01,image_02:a.image_02,image_03:a.image_03,image_04:a.image_04,alt:a.name,name:a.name,longDescription:a.long_description,region:a.region,country:a.country,location:a.location,touristRate:a.tourist_traffic_annually,product_01:a.product_01,product_01_affiliate_link:a.product_01_affiliate_link,product_02:a.product_02,product_02_affiliate_link:a.product_02_affiliate_link,product_03:a.product_03,product_03_affiliate_link:a.product_03_affiliate_link,product_04:a.product_04,product_04_affiliate_link:a.product_04_affiliate_link,product_05:a.product_05,product_05_affiliate_link:a.product_05_affiliate_link,product_06:a.product_06,product_06_affiliate_link:a.product_06_affiliate_link,product_07:a.product_07,product_07_affiliate_link:a.product_07_affiliate_link}))}}}]);
//# sourceMappingURL=6.7ad46eca.chunk.js.9da013f717bd.map